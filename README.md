# ILRuntime_Proto3

这个是ILRuntime整合Proto3的U3D示例工程

### 版本

- [![unity](https://img.shields.io/badge/Unity-2020.3.33f1c2-blue.svg?logo=unity)]()
- [![vs](https://img.shields.io/badge/VisualStudio-2022-purple.svg?logo=visualstudio)]()
- [![pb](https://img.shields.io/badge/Protobuf-2.4.0.(支持Repeated)-yellow.svg?logo=google)]()
- [![pb](https://img.shields.io/badge/WampServer-3.2.6-blue.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNC0zMFQwMTo1Mzo0MiswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDQtMzBUMDE6NTg6NTcrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDQtMzBUMDE6NTg6NTcrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM3ZTZlNmY1LWQxOTAtMzg0NC1hYzgzLTRjNTZkZmZmZmM5NSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjkxYTlkZmE3LTA3OTMtNjI0YS1hOTlkLTUwODgyNDAyNDVmNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmExZjc2MGYyLWNhNDAtNzU0ZC1iMGU4LThhNTgwODdiYzkyZiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTFmNzYwZjItY2E0MC03NTRkLWIwZTgtOGE1ODA4N2JjOTJmIiBzdEV2dDp3aGVuPSIyMDIyLTA0LTMwVDAxOjUzOjQyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozN2U2ZTZmNS1kMTkwLTM4NDQtYWM4My00YzU2ZGZmZmZjOTUiIHN0RXZ0OndoZW49IjIwMjItMDQtMzBUMDE6NTg6NTcrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7idOHAAAA+JJREFUSIl91luIlVUUB/Df3uecxpmjpvhgTYpZiBQYXTArMSItKM3sRlCBkFEvXSAqi16CrCCIqMjsSi8VYXipRCeQeZESoWwqysQsM4texhqnmTy33cP+TnNGRhd8fPusvdda//Vf61v7hOQpnHkUhyNnDmMTFkQM4m6SkLwOQ4xMjSSYyuTVkQokSleG5LXiRyXQRBkpRWIkBpob8oFGohkjPa2scBCP4ENSqx1xA+4A4p3c80lIXks051D5NRuO9FE7r0xEPIRAQPdsqrNjAQMGClcllCOpwShckEFUX0WjnA260XqIWGd4PTMWhuRN1K8nbssxTiZHsTZEWpsobaNyOmdtJvVngO3nGJYHptR4I0XclD00hjhyE+Hn8Z6nYNt+yveScy4ktRfH8CkpdUA8jXS8bXBLYdDPvJCz76pkffqa8CCts/EBLSFJ2IkDewgLJ044YWgxj34ekicLSv9eTnoG53ScbGIj7mUWrheS9Tgt5b1TSe8qVmyNNA7kkMM7c7OFDkpLgdqsbHB4C88r03UujTqLl/FFoqejeo3tzKvz22QMM+3TgtZ4PwMD9JwAIxzilxvwT0H7Ve06hMz1RBKK3ANU2235ho7KFesfcLxDV0YpokFaja7xnuNhWiMdigaaBaTKUo69QKntHa1riI/n9RS04EhhULuLy9bz1/2kAaq3oo/QTz0w2pe7KDwSkvcu5O+9WVHeSLOfZg+lOmkS4TnEnPjsUPTSS4vo3j0xS5C+Yu4lXCskjxb5zMf0Sxh8mXjFyY1PJWk3ww9x/h6uAyHZhcYCfvwmB6q0CUHckjkYV45Oh11YQLg5c9uucRdmXkzaG5K3b6S+JW/W0bOLi5bwJ/Y9QbVEa90EzlFay0iFueuYju92kq4uqol4e6TxcnbeQs/7lJbw2X3sS0x+ltacidEHea/naQ4m9j9A71K63x37ElsvRPQW0VDv419MeyyPyGZ742QSM7Bu1B/md9R2jGXgjDLmGBtWR4t3J+dtOC9iUbH+Eg/InLYzqhVuPpGnC6QyfsKkQrEG7xg/wBvFex4uL+yGC6eNjnOhKPQqvFfo/o1jCBNKpcxIszYWIywnvIIlY77iZcRXSCvHbNXzuInljrnQDMmGzTlqQL1GmsGlwwxu5fuVVIuz7dYtGT9YIka30b2C2M3xQcqT8pm4vbi7R3+m6+zcvw38s4PuNVR/z0VvyYEihoxdrKl4KjNJb9FYkQHUEI5QnVV8+rD9Rr7dwukdJUic8j49UZJ8z82/jWUfkf6HgvJWqqFosVU0V8pd06uj706QJv7AHuLHxE0ZUPufAP8B7mlIUGhR8fUAAAAASUVORK5CYII=)]()
- .NetCore 3.1.0
- ILRuntime 2.0.2

### 环境配置

- 1. ``'devenv' 不是内部或外部命令``。系统环境变量\Path\中，添加devenv.exe的目录。
- 2. 下载 [http://protoc-3.x.x-win64.zip](https://github.com/protocolbuffers/protobuf/releases)，解压将其中的protoc.exe拷贝到 ``C:\windows\system32``，使用命令测试 proto环境 ``protoc --version``。
- 3. 运行 ``.\ILRuntimeQ\Protoc\run.bat``，将 *.proto 转化为 *.cs。
- 4. Web服务器配置：
```
.\download
.\download\StandaloneWindows64
.\download\present.json
```

- 5. 热更工程配置：
   1. 引用``Unity\Library\ScriptAssemblies``中的Assembly Definition。
   2. 引用中设置不输出的dll。

### 使用说明

- 1. HotFix工程已嵌入到Untiy工程中，手动编译HotFix解决方案，生成 ``HotFix.dll ``到 ``StreamingAssets`` 目录下。
- 2. 使用工具栏 ``Tools/打包AB/MoveDLL`` 将 HotFix.dll 热更新程序集拷贝到 AssetBundle 资源打包目录中。
- 3. 再打包AB，将热更新代码座位AB打包。
- 4. 注意阿里云、腾讯云等远程部署时，端口规则不在远程电脑上设置，而是在平台防火墙规则管理中。

### //TODO
- [ ] 1. 打包热更新代码再自动化一点。允许打包单个资源。
- [ ] 2. 参考[ET初始化](https://github.com/egametang/ET/blob/9326784f37d5eacfda469c93b2764d18f3c6f101/Unity/Assets/Mono/CodeLoader.cs)，把可能的委托类型都注册了占位，避免需要时无法热更。
